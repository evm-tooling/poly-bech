{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "poly-bench",
  "scopeName": "source.bench",
  "patterns": [
    {
      "include": "#comment"
    },
    {
      "include": "#suite-block"
    }
  ],
  "repository": {
    "comment": {
      "name": "comment.line.bench",
      "match": "#.*$"
    },
    "suite-block": {
      "begin": "\\b(suite)\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\{",
      "end": "^\\}(\\s*)$",
      "beginCaptures": {
        "1": {
          "name": "keyword.control.bench"
        },
        "2": {
          "name": "entity.name.section.bench"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.block.end.bench"
        }
      },
      "patterns": [
        {
          "include": "#comment"
        },
        {
          "include": "#suite-attributes"
        },
        {
          "include": "#setup-go-block"
        },
        {
          "include": "#setup-ts-block"
        },
        {
          "include": "#fixture-block"
        },
        {
          "include": "#bench-block"
        }
      ]
    },
    "suite-attributes": {
      "patterns": [
        {
          "match": "\\b(description)\\s*:\\s*",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            }
          }
        },
        {
          "match": "\\b(iterations|warmup)\\s*:\\s*(\\d+)",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            },
            "2": {
              "name": "constant.numeric.bench"
            }
          }
        },
        {
          "match": "\\b(timeout)\\s*:\\s*(\\d+)(ms|s|m)?",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            },
            "2": {
              "name": "constant.numeric.bench"
            },
            "3": {
              "name": "keyword.other.unit.bench"
            }
          }
        },
        {
          "match": "\\b(requires|tags)\\s*:\\s*",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            }
          }
        },
        {
          "match": "\\b(order)\\s*:\\s*(sequential|parallel|random)",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            },
            "2": {
              "name": "constant.language.bench"
            }
          }
        },
        {
          "match": "\\b(compare)\\s*:\\s*(true|false)",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            },
            "2": {
              "name": "constant.language.boolean.bench"
            }
          }
        },
        {
          "match": "\\b(baseline)\\s*:\\s*",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            }
          }
        },
        {
          "name": "string.quoted.double.bench",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.bench",
              "match": "\\\\."
            }
          ]
        },
        {
          "name": "meta.array.bench",
          "begin": "\\[",
          "end": "\\]",
          "patterns": [
            {
              "name": "string.quoted.double.bench",
              "begin": "\"",
              "end": "\"",
              "patterns": [
                {
                  "name": "constant.character.escape.bench",
                  "match": "\\\\."
                }
              ]
            },
            {
              "match": ",",
              "name": "punctuation.separator.bench"
            }
          ]
        }
      ]
    },
    "setup-section-keywords": {
      "patterns": [
        {
          "match": "^\\s*(import|declare|init|helpers)\\s*(\\{|\\()?",
          "captures": {
            "1": {
              "name": "keyword.control.setup.bench"
            }
          }
        },
        {
          "match": "^\\s*(async)\\s+(init)\\s*\\{?",
          "captures": {
            "1": {
              "name": "keyword.control.async.bench"
            },
            "2": {
              "name": "keyword.control.setup.bench"
            }
          }
        }
      ]
    },
    "setup-go-block": {
      "name": "meta.block.setup.go.bench",
      "begin": "\\b(setup)\\s+(go)\\s*\\{\\s*$",
      "end": "^(\\s{2,4})\\}(\\s*)$",
      "beginCaptures": {
        "1": {
          "name": "keyword.control.bench"
        },
        "2": {
          "name": "entity.name.language.bench"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.block.end.bench"
        }
      },
      "patterns": [
        {
          "include": "#setup-section-keywords"
        },
        {
          "include": "source.go"
        }
      ]
    },
    "setup-ts-block": {
      "name": "meta.block.setup.ts.bench",
      "begin": "\\b(setup)\\s+(ts)\\s*\\{\\s*$",
      "end": "^(\\s{2,4})\\}(\\s*)$",
      "beginCaptures": {
        "1": {
          "name": "keyword.control.bench"
        },
        "2": {
          "name": "entity.name.language.bench"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.block.end.bench"
        }
      },
      "patterns": [
        {
          "include": "#setup-section-keywords"
        },
        {
          "include": "source.ts"
        }
      ]
    },
    "fixture-block": {
      "begin": "\\b(fixture)\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\{",
      "end": "\\}",
      "beginCaptures": {
        "1": {
          "name": "keyword.control.bench"
        },
        "2": {
          "name": "entity.name.tag.bench"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.block.end.bench"
        }
      },
      "patterns": [
        {
          "include": "#comment"
        },
        {
          "include": "#fixture-attributes"
        },
        {
          "include": "#fixture-go-block"
        },
        {
          "include": "#fixture-ts-block"
        },
        {
          "name": "string.quoted.double.bench",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "match": "[0-9a-fA-F]+",
              "name": "constant.other.hex.bench"
            }
          ]
        }
      ]
    },
    "fixture-attributes": {
      "patterns": [
        {
          "match": "\\b(hex|description|shape)\\s*:\\s*",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            }
          }
        }
      ]
    },
    "bench-block": {
      "begin": "\\b(bench)\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\{",
      "end": "^(\\s{4})\\}(\\s*)$",
      "beginCaptures": {
        "1": {
          "name": "keyword.control.bench"
        },
        "2": {
          "name": "entity.name.function.bench"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.block.end.bench"
        }
      },
      "patterns": [
        {
          "include": "#comment"
        },
        {
          "include": "#bench-attributes"
        },
        {
          "include": "#bench-hooks"
        },
        {
          "include": "#bench-go-block"
        },
        {
          "include": "#bench-ts-block"
        },
        {
          "include": "#bench-go-line"
        },
        {
          "include": "#bench-ts-line"
        }
      ]
    },
    "bench-attributes": {
      "patterns": [
        {
          "match": "\\b(description)\\s*:\\s*",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            }
          }
        },
        {
          "match": "\\b(iterations|warmup)\\s*:\\s*(\\d+)",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            },
            "2": {
              "name": "constant.numeric.bench"
            }
          }
        },
        {
          "match": "\\b(timeout)\\s*:\\s*(\\d+)(ms|s|m)?",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            },
            "2": {
              "name": "constant.numeric.bench"
            },
            "3": {
              "name": "keyword.other.unit.bench"
            }
          }
        },
        {
          "match": "\\b(tags)\\s*:\\s*",
          "captures": {
            "1": {
              "name": "keyword.other.bench"
            }
          }
        },
        {
          "name": "string.quoted.double.bench",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.bench",
              "match": "\\\\."
            }
          ]
        },
        {
          "name": "meta.array.bench",
          "begin": "\\[",
          "end": "\\]",
          "patterns": [
            {
              "name": "string.quoted.double.bench",
              "begin": "\"",
              "end": "\"",
              "patterns": [
                {
                  "name": "constant.character.escape.bench",
                  "match": "\\\\."
                }
              ]
            },
            {
              "match": ",",
              "name": "punctuation.separator.bench"
            }
          ]
        }
      ]
    },
    "bench-hooks": {
      "patterns": [
        {
          "match": "\\b(skip|validate)\\s+(go|ts)\\s*:",
          "captures": {
            "1": {
              "name": "keyword.control.hook.bench"
            },
            "2": {
              "name": "entity.name.language.bench"
            }
          }
        },
        {
          "match": "\\b(before|after|each)\\s+(go|ts)\\s*:",
          "captures": {
            "1": {
              "name": "keyword.control.hook.bench"
            },
            "2": {
              "name": "entity.name.language.bench"
            }
          }
        }
      ]
    },
    "bench-go-block": {
      "name": "meta.block.bench.go.bench",
      "begin": "\\b(go)\\s*:\\s*\\{\\s*$",
      "end": "^(\\s{6,8})\\}(\\s*)$",
      "beginCaptures": {
        "1": {
          "name": "entity.name.language.bench"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.block.end.bench"
        }
      },
      "contentName": "source.go.embedded.bench",
      "patterns": [
        {
          "include": "source.go"
        }
      ]
    },
    "bench-ts-block": {
      "name": "meta.block.bench.ts.bench",
      "begin": "\\b(ts)\\s*:\\s*\\{\\s*$",
      "end": "^(\\s{6,8})\\}(\\s*)$",
      "beginCaptures": {
        "1": {
          "name": "entity.name.language.bench"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.block.end.bench"
        }
      },
      "contentName": "source.ts.embedded.bench",
      "patterns": [
        {
          "include": "source.ts"
        }
      ]
    },
    "bench-go-line": {
      "name": "meta.expression.go.bench",
      "begin": "\\b(go)\\s*:\\s*",
      "end": "$",
      "beginCaptures": {
        "1": {
          "name": "entity.name.language.bench"
        }
      },
      "contentName": "source.go.embedded.bench",
      "patterns": [
        {
          "include": "source.go"
        }
      ]
    },
    "bench-ts-line": {
      "name": "meta.expression.ts.bench",
      "begin": "\\b(ts)\\s*:\\s*",
      "end": "$",
      "beginCaptures": {
        "1": {
          "name": "entity.name.language.bench"
        }
      },
      "contentName": "source.ts.embedded.bench",
      "patterns": [
        {
          "include": "source.ts"
        }
      ]
    },
    "fixture-go-block": {
      "name": "meta.block.fixture.go.bench",
      "begin": "\\b(go)\\s*:\\s*\\{\\s*$",
      "end": "^[ \\t]{4,8}\\}\\s*$",
      "beginCaptures": {
        "1": {
          "name": "entity.name.language.bench"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.block.end.bench"
        }
      },
      "contentName": "source.go.embedded.bench",
      "patterns": [
        {
          "include": "source.go"
        }
      ]
    },
    "fixture-ts-block": {
      "name": "meta.block.fixture.ts.bench",
      "begin": "\\b(ts)\\s*:\\s*\\{\\s*$",
      "end": "^[ \\t]{4,8}\\}\\s*$",
      "beginCaptures": {
        "1": {
          "name": "entity.name.language.bench"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.block.end.bench"
        }
      },
      "contentName": "source.ts.embedded.bench",
      "patterns": [
        {
          "include": "source.ts"
        }
      ]
    }
  }
}
